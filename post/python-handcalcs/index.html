<!doctype html>
<html lang="zh-CN">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>python handcalcs Latex公式编辑 | 冷眼-风雨飘摇</title>
    <meta property="og:title" content="python handcalcs Latex公式编辑 - 冷眼-风雨飘摇">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2020-08-19T15:18:30&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2020-08-19T15:18:30&#43;08:00'>
        
    <meta name="Keywords" content="[python handcalcs Latex公式编辑]">
    <meta name="description" content="python handcalcs Latex公式编辑">
        
    <meta name="author" content="冷眼">
    <meta property="og:url" content="https://cold-eye.github.io/post/python-handcalcs/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    

    
    
    

    
        <link href="https://cdn.bootcdn.net/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" rel="stylesheet">
    

    
    
        <link rel="stylesheet" href='/css/douban.css'>
    
        <link rel="stylesheet" href='/css/other.css'>
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://cold-eye.github.io/">
                        冷眼-风雨飘摇
                    </a>
                
                <p class="description">专注于python、自然语言处理</p>
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="current" href="https://cold-eye.github.io/">首页</a>
                    
                    <a  href="https://cold-eye.github.io/archives/" title="归档">归档</a>
                    
                    <a  href="https://cold-eye.github.io/categories/" title="分类">分类</a>
                    
                    <a  href="https://cold-eye.github.io/about/" title="博主">博主</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <article class="post">
        <header>
            <h1 class="post-title">python handcalcs Latex公式编辑</h1>
        </header>
        <date class="post-meta meta-date">
            2020年8月19日
        </date>
        
        <div class="post-meta">
            <span>|</span>
            
            <span class="meta-category"><a href='https://cold-eye.github.io/categories/python'>python</a></span>
            
        </div>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">| <span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span> | <span class="post-date">共3022字</span>，阅读约<span class="more-meta"> 7 分钟</span>
        </div>
        
        
        <div class="post-content">
            <p><code>handcalcs</code> is a library to render Python calculation code automatically in Latex, but in a manner that mimics how one might format their calculation if it were written with a pencil:  write the symbolic formula, <strong>followed by numeric substitutions</strong>, and then the result.</p>
<p>Because <code>handcalcs</code> shows the numeric substitution, the calculations become significantly easier to check and verify by hand.</p>
<h2 id="contents">Contents</h2>
<ul>
<li><a href="#basic-demo">Basic Demo</a></li>
<li><a href="#installing">Installation</a></li>
<li><a href="#basic-usage-1-as-a-jupyter-cell-magic-render">Basic Usage</a></li>
<li><a href="#basic-usage-2-as-a-decorator-on-your-functions-handcalc">Enhanced Usage</a></li>
<li><a href="#features">Features</a></li>
<li><a href="#pdf-printing-in-jupyter">PDF Printing in Jupyter</a></li>
<li><a href="#expected-behaviours">Expected Behaviours</a></li>
<li><a href="#gotchas">Gotchas and Disclaimer</a></li>
<li><a href="https://github.com/connorferster/handcalcs/wiki">Applications and Compatibility with Other Libraries (wiki)</a></li>
</ul>
<h2 id="basic-demo">Basic Demo</h2>
<p>
    
    
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/cold-eye/cold-eye.github.io/images/python-handcalcs/basic_demo.gif">
            <img class="mx-auto" alt="handcalcs demo 1" src="https://cdn.jsdelivr.net/gh/cold-eye/cold-eye.github.io/images/python-handcalcs/basic_demo.gif" />
        </a>
    </p>
<h2 id="installing">Installing</h2>
<p>You can install using pip:</p>
<p><code>pip install handcalcs</code></p>
<h2 id="basic-usage-1-as-a-jupyter-cell-magic-render">Basic Usage 1: As a Jupyter cell magic (<code>%%render</code>)</h2>
<p><code>handcalcs</code> is intended to be used with either Jupyter Notebook or Jupyter Lab as a <em>cell magic</em>.</p>
<p>First, import the module and run the cell:</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#000;font-weight:bold">import</span> <span style="color:#555">handcalcs.render</span>
</code></pre></td></tr></table>
</div>
</div><p>Then, in any cell that you want to render with <code>handcalcs</code>, just use the render cell magic at the top of your cell:</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#000;font-weight:bold">%%</span>render
</code></pre></td></tr></table>
</div>
</div><p>For example:</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#000;font-weight:bold">%%</span>render
a <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">2</span>
b <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">3</span>
c <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">2</span><span style="color:#000;font-weight:bold">*</span>a <span style="color:#000;font-weight:bold">+</span> b<span style="color:#000;font-weight:bold">/</span><span style="color:#099">3</span>
</code></pre></td></tr></table>
</div>
</div><p><strong>That is it!</strong></p>
<p>Once rendered, you can then export your notebook as a PDF, provided you have a Latex environment installed on your system. If you are new to working with Latex and would like to install it on your system so you can use this functionality, please see the section <a href="https://github.com/connorferster/handcalcs/wiki">Installing Tex</a>, in the wiki.</p>
<h2 id="basic-usage-2-as-a-decorator-on-your-functions-handcalc">Basic Usage 2: As a decorator on your functions, <code>@handcalc()</code></h2>
<p>This is the same kind of thing except instead of running your code in a Jupyter cell, you are running your code in a Python function, which is treated like a Jupyter cell.</p>
<p>Start by importing the <code>@handcalc()</code> decorator:</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#000;font-weight:bold">from</span> <span style="color:#555">handcalcs.decorator</span> <span style="color:#000;font-weight:bold">import</span> handcalc
</code></pre></td></tr></table>
</div>
</div><p>Then, write your function. Your function MUST <code>return locals()</code>:</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#3c5d5d;font-weight:bold">@handcalc</span>()
<span style="color:#000;font-weight:bold">def</span> <span style="color:#900;font-weight:bold">my_calc</span>(x, y, z):
  a <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">2</span><span style="color:#000;font-weight:bold">*</span>x <span style="color:#000;font-weight:bold">/</span> y
  b <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">3</span><span style="color:#000;font-weight:bold">*</span>a
  c <span style="color:#000;font-weight:bold">=</span> (a <span style="color:#000;font-weight:bold">+</span> b) <span style="color:#000;font-weight:bold">/</span> z
  <span style="color:#000;font-weight:bold">return</span> <span style="color:#0086b3">locals</span>()
</code></pre></td></tr></table>
</div>
</div><p><code>@handcalc(left: str = &quot;&quot;, right: str = &quot;&quot;, jupyter_display: bool = False)</code></p>
<p>Returns a tuple consisting of <code>(latex_code: str, locals: dict)</code>, where <code>locals</code> is a dictionary of all variables in the scope of the function namespace.</p>
<ul>
<li><em><code>left</code></em> and <em><code>right</code></em> are strings that can precede and follow the encoded Latex string, such as <em><code>\\[</code></em> and <em><code>\\]</code></em> or <em><code>$</code></em> and <em><code>$</code></em></li>
<li><em><code>jupyter_display</code></em>, when True, will return only the <em><code>locals</code></em> dictionary and instead will display the encoded Latex string rendering with <em><code>display(Latex(latex_code))</code></em> from <em><code>IPython.display</code></em>. Will return an error if not used within</li>
</ul>
<p>In your decorated function, everything between <code>def my_calc(...)</code> and <code>return locals()</code> is now like the code in a Jupyter cell, except it&rsquo;s a standard Python function.</p>
<p>Used in this way, you can use <code>@handcalc()</code> to dynamically generate Latex code for display in Jupyter and non-Jupypter Python environments (e.g. streamlit).</p>
<h2 id="comment-tags">Comment Tags</h2>
<p><code>handcalcs</code> makes certain assumptions about how you would like your calculation formatted and does not allow for a great deal of customization in this regard. However, there are currently <strong>three</strong> customizations you can make using <code># comment tags</code> as the <em>first line of your cell</em> after the <code>%%render</code> cell magic. You can only use <strong>one</strong> comment tag per cell.</p>
<p><strong>Comment tags can be used with both the Jupyter cell magic and the function decorator</strong>. To use a comment tag with the decorator, the comment tag must be the first line after the signature (i.e. the <code>def func_name():</code>)</p>
<h3 id="-parameters"><code># Parameters</code>:</h3>
<p><code>handcalcs</code> renders lines of code vertically, one after the other. However, when you are assigning variables, or displaying resulting variables, you may not want to waste all of that vertical space.</p>
<p>Using the <code># Parameters</code> comment tag, your list of parameters will instead render in three columns, thereby saving vertical space.</p>
<p>
    
    
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/cold-eye/cold-eye.github.io/images/python-handcalcs/parameters.gif">
            <img class="mx-auto" alt="Parameters" src="https://cdn.jsdelivr.net/gh/cold-eye/cold-eye.github.io/images/python-handcalcs/parameters.gif" />
        </a>
    </p>
<h3 id="-long-and--short"><code># Long</code> and <code># Short</code>:</h3>
<p>To save vertical space, <code>handcalcs</code> <em>attempts</em> to figure out how long your calculation is and, if it is short enough, renders it out fully on one line.</p>
<p>If <code>handcalcs</code>'s internal test deems the calculation as being too long to fit onto one line, it breaks it out into multiple lines.</p>
<p>Use the <code># Long</code> or <code># Short</code> comment tags to override the length check and display the calculation in the &ldquo;Long&rdquo; format or the &ldquo;Short&rdquo; format for all calculations in the cell. e.g.</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">    <span style="color:#998;font-style:italic"># Format for &#34;short&#34; calculations (can fit on one line):</span>
    c <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">2</span><span style="color:#000;font-weight:bold">*</span>a <span style="color:#000;font-weight:bold">+</span> b<span style="color:#000;font-weight:bold">/</span><span style="color:#099">3</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">2</span><span style="color:#000;font-weight:bold">*</span>(<span style="color:#099">2</span>) <span style="color:#000;font-weight:bold">+</span> (<span style="color:#099">3</span>)<span style="color:#000;font-weight:bold">/</span><span style="color:#099">3</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">5</span>

    <span style="color:#998;font-style:italic"># Format for &#34;long&#34; calculations (requires multi-line format)</span>
    c <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">2</span><span style="color:#000;font-weight:bold">*</span>a <span style="color:#000;font-weight:bold">+</span> b<span style="color:#000;font-weight:bold">/</span><span style="color:#099">3</span>
      <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">2</span><span style="color:#000;font-weight:bold">*</span>(<span style="color:#099">2</span>) <span style="color:#000;font-weight:bold">+</span> (<span style="color:#099">3</span>)<span style="color:#000;font-weight:bold">/</span><span style="color:#099">3</span>
      <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">5</span>
</code></pre></td></tr></table>
</div>
</div><p>
    
    
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/cold-eye/cold-eye.github.io/images/python-handcalcs/shortandlong.gif">
            <img class="mx-auto" alt="Short and Long calculations" src="https://cdn.jsdelivr.net/gh/cold-eye/cold-eye.github.io/images/python-handcalcs/shortandlong.gif" />
        </a>
    </p>
<h3 id="-symbolic"><code># Symbolic</code></h3>
<p>The primary purpose of <code>handcalcs</code> is to render the full calculation with the numeric substitution. This allows for easy traceability and verification of the calculation.</p>
<p>However, there may be instances when it is preferred to simply display calculations symbolically. For example, you can use the <code># Symbolic</code> tag to use <code>handcalcs</code> as a fast way to render Latex equations symbolically.</p>
<p>Alternatively, you may prefer to render out all of input parameters in one cell, your formulae symbolically in the following cell, and then all the final values in the last cell, skipping the numeric substitution process entirely.</p>
<p>Keep in mind that even if you use the <code># Symbolic</code> tag with your calculations, you still need to declare those variables (by assigning values to them) ahead of time in order for your calculation to be valid Python.</p>
<p>
    
    
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/cold-eye/cold-eye.github.io/images/python-handcalcs/symbolic.gif">
            <img class="mx-auto" alt="handcalcs with forallpeople" src="https://cdn.jsdelivr.net/gh/cold-eye/cold-eye.github.io/images/python-handcalcs/symbolic.gif" />
        </a>
    </p>
<hr>
<h2 id="units-packages-compatibility">Units Packages Compatibility</h2>
<p><code>handcalcs</code> was designed to be used with the units package, <a href="https://github.com/connorferster/forallpeople">forallpeople</a> (and <a href="https://github.com/connorferster/forallpeople">forallpeople</a> was designed to be compatible with <code>handcalcs</code>). However, it has been recently reported that <a href="pint.readthedocs.org">pint</a> can work to good effect, also.</p>
<p>
    
    
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/cold-eye/cold-eye.github.io/images/python-handcalcs/forallpeople.gif">
            <img class="mx-auto" alt="handcalcs with forallpeople" src="https://cdn.jsdelivr.net/gh/cold-eye/cold-eye.github.io/images/python-handcalcs/forallpeople.gif" />
        </a>
    </p>
<p><strong>For potential compatibility with other units packages, please see <a href="https://github.com/connorferster/handcalcs/wiki">the wiki.</a></strong></p>
<hr>
<h2 id="features">Features</h2>
<h3 id="quickly-display-the-values-of-many-variables">Quickly display the values of many variables</h3>
<p>In Python, displaying the value of many variables often requires tediously typing them all into a series of <code>print()</code> statements. <code>handcalcs</code> makes this much easier:</p>
<p>
    
    
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/cold-eye/cold-eye.github.io/images/python-handcalcs/outputs.gif">
            <img class="mx-auto" alt="display variable demo" src="https://cdn.jsdelivr.net/gh/cold-eye/cold-eye.github.io/images/python-handcalcs/outputs.gif" />
        </a>
    </p>
<h3 id="get-just-the-latex-code-without-the-render">Get Just the Latex Code, without the render</h3>
<p>If you just want to generate the rendered Latex code directly to use in your own Latex files, you can use the <code>%%tex</code> cell magic instead:</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#000;font-weight:bold">%%</span>tex
a <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">2</span>
b <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">3</span>
c <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">2</span><span style="color:#000;font-weight:bold">*</span>a <span style="color:#000;font-weight:bold">+</span> b<span style="color:#000;font-weight:bold">/</span><span style="color:#099">3</span>
</code></pre></td></tr></table>
</div>
</div><p>Then you can just copy and paste the result into your own LaTeX document.</p>
<p>
    
    
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/cold-eye/cold-eye.github.io/images/python-handcalcs/tex.gif">
            <img class="mx-auto" alt="tex cell magic demo" src="https://cdn.jsdelivr.net/gh/cold-eye/cold-eye.github.io/images/python-handcalcs/tex.gif" />
        </a>
    </p>
<hr>
<h3 id="subscripts-and-sub-subscripts-etc">Subscripts (and sub-subscripts, etc.)</h3>
<p>Subscripts in variable names are automatically created when <code>_</code> is used in the variable name. Sub-subscripts are nested for each separate <code>_</code> used in series.</p>
<p>
    
    
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/cold-eye/cold-eye.github.io/images/python-handcalcs/subscripts.gif">
            <img class="mx-auto" alt="Subscripts demo" src="https://cdn.jsdelivr.net/gh/cold-eye/cold-eye.github.io/images/python-handcalcs/subscripts.gif" />
        </a>
    </p>
<hr>
<h3 id="greek-symbols">Greek symbols</h3>
<p>Any variable name that contains a Greek letter (e.g. &ldquo;pi&rdquo;, &ldquo;upsilon&rdquo;, &ldquo;eta&rdquo;, etc.) as a string or substring will be replaced by the appropriate Latex code to represent that Greek letter.</p>
<ul>
<li>
<p>Using lower case letters as your variable name will make a lower case Greek letter.</p>
</li>
<li>
<p>Using a Capitalized Name for your variable will render it as an upper case Greek letter.</p>
</li>
</ul>
<p>
    
    
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/cold-eye/cold-eye.github.io/images/python-handcalcs/greeks.gif">
            <img class="mx-auto" alt="Greek symbols demo" src="https://cdn.jsdelivr.net/gh/cold-eye/cold-eye.github.io/images/python-handcalcs/greeks.gif" />
        </a>
    </p>
<hr>
<h3 id="functions-built-in-or-custom">Functions, built-in or custom</h3>
<p>If you are using Python functions in your calculation, eg. <code>min()</code> or <code>tan()</code>, they will be replaced with Latex code to represent that function in Latex.</p>
<p>If you are creating your own functions, then they will be rendered in Latex as a custom operator.</p>
<p>If you are using a function with the name <code>sqrt</code> (whether your own custom implementation or from <code>math.sqrt</code>), then it will be rendered as the radical sign.</p>
<p>
    
    
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/cold-eye/cold-eye.github.io/images/python-handcalcs/funcs.gif">
            <img class="mx-auto" alt="Functions" src="https://cdn.jsdelivr.net/gh/cold-eye/cold-eye.github.io/images/python-handcalcs/funcs.gif" />
        </a>
    </p>
<hr>
<h3 id="rendered-in-line-comments">Rendered in-line Comments</h3>
<p>Any comments placed after a line of calculation will be rendered as an inline comment in the Latex.</p>
<p>This makes it convenient to make notes along side your calculations to briefly explain where you may have acquired or derived a particular value.</p>
<p>
    
    
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/cold-eye/cold-eye.github.io/images/python-handcalcs/comments.gif">
            <img class="mx-auto" alt="Comments" src="https://cdn.jsdelivr.net/gh/cold-eye/cold-eye.github.io/images/python-handcalcs/comments.gif" />
        </a>
    </p>
<hr>
<h3 id="skip-the-substitution">Skip the substitution</h3>
<p>Any calculation entirely wrapped in parentheses, <code>()</code>, will be rendered as just <code>param = result</code>, without the substitution.</p>
<p>This can be convient when you want to calculate a parameter on the fly and not have it be the focus of the calculation.</p>
<p>
    
    
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/cold-eye/cold-eye.github.io/images/python-handcalcs/skip_subs.gif">
            <img class="mx-auto" alt="Skip the substitution" src="https://cdn.jsdelivr.net/gh/cold-eye/cold-eye.github.io/images/python-handcalcs/skip_subs.gif" />
        </a>
    </p>
<hr>
<h3 id="conditional-statements">Conditional statements</h3>
<p>Many calculations in the &ldquo;real world&rdquo; are dependent on context.</p>
<p><code>handcalcs</code> allows for the inclusion of some simple conditional statements into its code in a way that makes it easier to understand the context of the calculation.</p>
<p>
    
    
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/cold-eye/cold-eye.github.io/images/python-handcalcs/conditionals.gif">
            <img class="mx-auto" alt="Conditional calculations" src="https://cdn.jsdelivr.net/gh/cold-eye/cold-eye.github.io/images/python-handcalcs/conditionals.gif" />
        </a>
    </p>
<p><em>Note: Multiple &ldquo;lines&rdquo; of calculations can be used after the conditional expression provided that they are all on the same line and separated with &ldquo;<code>;</code>&rdquo;. See <a href="https://github.com/connorferster/handcalcs#expected-behaviours">Expected Behaviours</a> for more context.</em></p>
<hr>
<h3 id="numeric-integration">Numeric integration</h3>
<p>You can use <code>scipy.quad</code> to perform numeric integration on a pre-defined function and have <code>handcalcs</code> perform a basic rendering of it.</p>
<p>This behaviour is triggered if you use a function with either <code>integrate</code> or <code>quad</code> in the name.</p>
<p>
    
    
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/cold-eye/cold-eye.github.io/images/python-handcalcs/integration.gif">
            <img class="mx-auto" alt="Numeric integration" src="https://cdn.jsdelivr.net/gh/cold-eye/cold-eye.github.io/images/python-handcalcs/integration.gif" />
        </a>
    </p>
<hr>
<h2 id="pdf-printing-in-jupyter">PDF Printing in Jupyter</h2>
<p>Jupyter Notebooks/Lab are able to print notebooks to PDF through two methods. Both can produce great results with handcalcs:</p>
<ol>
<li><strong>Export to HTML</strong>: Open the exported HTML page in your browser and print to PDF using your system&rsquo;s own PDF printer
<ul>
<li>Pros: No additional software required, you can include images copy-pasted into your Jupyter notebook, and you can change the scale of the printed PDF in your brower&rsquo;s print window.</li>
<li>Cons: Page breaks can be less graceful on html output and you cannot otherwise customize the output further like you can with a .tex file</li>
</ul>
</li>
<li><strong>Export to PDF (via Latex)</strong>: Using your previously installed Latex distribution, Jupyter will first export your notebook to a .tex file and then render the file to PDF. This requires you to have a Latex distribution already installed on your system (Instructions: <a href="https://miktex.org/howto/install-miktex">windows</a>, <a href="https://tug.org/mactex/mactex-download.html">mac os</a>, <a href="https://linuxconfig.org/how-to-install-latex-on-ubuntu-20-04-focal-fossa-linux">ubuntu</a>).
<ul>
<li>Pros: Page breaks tend to work better and you have the ability to customize your output further using the generated .tex file</li>
<li>Cons: Cannot easily rescale the PDF print (e.g. to ensure really long equations fit on the page) and you cannot include images copy/pasted into your Notebook. Images can be used but must be linked in with Markdown and the file must reside in the same directory as your Notebook.</li>
</ul>
</li>
</ol>
<p>PDF notebooks made with handcalcs tend to look better if the code input cells are suppressed. To make this convenient, handcalcs ships with two modified nbconvert template files that can be installed by running a function in Jupyter before exporting.</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">handcalcs<span style="color:#000;font-weight:bold">.</span>install_templates<span style="color:#000;font-weight:bold">.</span>install_html(swap_in:<span style="color:#0086b3">str</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;&#34;</span>, swap_out:<span style="color:#0086b3">str</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;full.tpl&#34;</span>, restore:<span style="color:#0086b3">bool</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#999">False</span>)
handcalcs<span style="color:#000;font-weight:bold">.</span>install_templates<span style="color:#000;font-weight:bold">.</span>install_latex(swap_in:<span style="color:#0086b3">str</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;&#34;</span>, swap_out:<span style="color:#0086b3">str</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;article.tplx&#34;</span>, restore:<span style="color:#0086b3">bool</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#999">False</span>)
</code></pre></td></tr></table>
</div>
</div><p><strong><code>swap_in</code></strong>: the name of the handcalcs template file you wish to install. When not provided, the function will print a list of available templates whose names are acceptable inputs for this argument.
<strong><code>swap_out</code></strong>: the name of the nbconvert template file you wish to replace (default file is nbconvert&rsquo;s default html or latex template, respectively)
<strong><code>restore</code></strong>: when set to <code>True</code>, the function will remove your previously installed template file and restore the default nbconvert template.</p>
<h3 id="design-rationale">Design rationale</h3>
<p>While there are methods for manually changing the template that nbconvert uses, this has to be performed on the command line as a separate conversion step. This default template override approach is not available from within the Jupyter GUI interface.</p>
<p>I have found that the easiest and most reliable way to quickly change the default export behaviour is to swap out and replace the default template files. By using this approach, you can export your notebooks directly from the Jupyter GUI menu options and have your notebooks look how you wish without fussing with multiple configuration settings that may or may not take.</p>
<h3 id="note">Note</h3>
<p>When handcalcs installs these templates, they make a semi-permanent change to your templates that will persist for all of your other notebooks that you print from with Jupyter, regardless of whether you are working with handcalcs or not. It does this because it is &ldquo;physically&rdquo; swapping out and replacing your nbconvert default template files for your local installation  meaning it will persist past the end of your Jupyter session.</p>
<p>This change can be reverted at any time by using the <code>restore = True</code> argument. Additionally, the function will not let you repeatedly install the same template. If you wish to install another template, the function will prompt you to run the function with <code>restore = True</code> before attempting another installation.</p>
<p>In this way, handcalcs can fully manage these template installations for you. However, if you manually alter the file names of an installed handcalcs template in the nbconvert templates directory, there is no guarantee that your original template can be successfully restored.</p>
<h3 id="example-of-use">Example of use</h3>
<p>You can perform the same below process using either <code>install_html</code> or <code>install_latex</code> functions.</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#000;font-weight:bold">&gt;&gt;&gt;</span> <span style="color:#000;font-weight:bold">from</span> <span style="color:#555">handcalcs.install_templates</span> <span style="color:#000;font-weight:bold">import</span> install_html
<span style="color:#000;font-weight:bold">&gt;&gt;&gt;</span> <span style="color:#000;font-weight:bold">from</span> <span style="color:#555">handcalcs.install_templates</span> <span style="color:#000;font-weight:bold">import</span> install_latex

<span style="color:#000;font-weight:bold">&gt;&gt;&gt;</span> install_html() <span style="color:#998;font-style:italic"># Use with no arguments to discover available templates</span>
Available templates:
 [<span style="color:#d14">&#39;full_html_noinputs.tpl&#39;</span>]
<span style="color:#000;font-weight:bold">&gt;&gt;&gt;</span> install_html(<span style="color:#d14">&#39;full_html_noinputs.tpl&#39;</span>) <span style="color:#998;font-style:italic"># Select the template you wish to install</span>
<span style="color:#000;font-weight:bold">/</span>usr<span style="color:#000;font-weight:bold">/</span>Name<span style="color:#000;font-weight:bold">/</span>path<span style="color:#000;font-weight:bold">/</span>to<span style="color:#000;font-weight:bold">/</span>your<span style="color:#000;font-weight:bold">/</span>nbconvert<span style="color:#000;font-weight:bold">/</span>templates<span style="color:#000;font-weight:bold">/</span><span style="color:#0086b3">dir</span><span style="color:#000;font-weight:bold">/</span>html<span style="color:#000;font-weight:bold">/</span>full<span style="color:#000;font-weight:bold">.</span>tpl
<span style="color:#000;font-weight:bold">-</span><span style="color:#000;font-weight:bold">is</span> now<span style="color:#000;font-weight:bold">-</span>
<span style="color:#000;font-weight:bold">/</span>usr<span style="color:#000;font-weight:bold">/</span>Name<span style="color:#000;font-weight:bold">/</span>path<span style="color:#000;font-weight:bold">/</span>to<span style="color:#000;font-weight:bold">/</span>your<span style="color:#000;font-weight:bold">/</span>nbconvert<span style="color:#000;font-weight:bold">/</span>templates<span style="color:#000;font-weight:bold">/</span><span style="color:#0086b3">dir</span><span style="color:#000;font-weight:bold">/</span>html<span style="color:#000;font-weight:bold">/</span>full_swapped<span style="color:#000;font-weight:bold">.</span>tpl

<span style="color:#000;font-weight:bold">/</span>usr<span style="color:#000;font-weight:bold">/</span>Name<span style="color:#000;font-weight:bold">/</span>path<span style="color:#000;font-weight:bold">/</span>to<span style="color:#000;font-weight:bold">/</span>your<span style="color:#000;font-weight:bold">/</span>handcalcs<span style="color:#000;font-weight:bold">/</span>templates<span style="color:#000;font-weight:bold">/</span><span style="color:#0086b3">dir</span><span style="color:#000;font-weight:bold">/</span>html<span style="color:#000;font-weight:bold">/</span>full_html_noinputs<span style="color:#000;font-weight:bold">.</span>tpl
<span style="color:#000;font-weight:bold">-</span><span style="color:#000;font-weight:bold">is</span> now<span style="color:#000;font-weight:bold">-</span>
<span style="color:#000;font-weight:bold">/</span>usr<span style="color:#000;font-weight:bold">/</span>Name<span style="color:#000;font-weight:bold">/</span>path<span style="color:#000;font-weight:bold">/</span>to<span style="color:#000;font-weight:bold">/</span>your<span style="color:#000;font-weight:bold">/</span>nbconvert<span style="color:#000;font-weight:bold">/</span>templates<span style="color:#000;font-weight:bold">/</span><span style="color:#0086b3">dir</span><span style="color:#000;font-weight:bold">/</span>html<span style="color:#000;font-weight:bold">/</span>full<span style="color:#000;font-weight:bold">.</span>tpl

<span style="color:#000;font-weight:bold">&gt;&gt;&gt;</span> install_html(restore <span style="color:#000;font-weight:bold">=</span> <span style="color:#999">True</span>) <span style="color:#998;font-style:italic"># To revert this change to your template files</span>
<span style="color:#000;font-weight:bold">/</span>user<span style="color:#000;font-weight:bold">/</span>Name<span style="color:#000;font-weight:bold">/</span>path<span style="color:#000;font-weight:bold">/</span>to<span style="color:#000;font-weight:bold">/</span>your<span style="color:#000;font-weight:bold">/</span>nbconvert<span style="color:#000;font-weight:bold">/</span>templates<span style="color:#000;font-weight:bold">/</span><span style="color:#0086b3">dir</span><span style="color:#000;font-weight:bold">/</span>html<span style="color:#000;font-weight:bold">/</span>full<span style="color:#000;font-weight:bold">.</span>tpl
<span style="color:#000;font-weight:bold">-</span>was deleted, <span style="color:#000;font-weight:bold">and</span> replaced <span style="color:#000;font-weight:bold">with</span><span style="color:#000;font-weight:bold">-</span>
<span style="color:#000;font-weight:bold">/</span>user<span style="color:#000;font-weight:bold">/</span>Name<span style="color:#000;font-weight:bold">/</span>path<span style="color:#000;font-weight:bold">/</span>to<span style="color:#000;font-weight:bold">/</span>your<span style="color:#000;font-weight:bold">/</span>nbconvert<span style="color:#000;font-weight:bold">/</span>templates<span style="color:#000;font-weight:bold">/</span><span style="color:#0086b3">dir</span><span style="color:#000;font-weight:bold">/</span>html<span style="color:#000;font-weight:bold">/</span>full_swapped<span style="color:#000;font-weight:bold">.</span>tpl
</code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="expected-behaviours">Expected Behaviours</h2>
<p><code>handcalcs</code> is intended to render arithmetical calculations written in Python code. It is not intended to render arbitrary Python into Latex.</p>
<p>Given that, handcalcs only renders a small subset of Python and there is a lot that will not work, especially anything that happens over multiple lines (e.g. function definitions, <code>for</code> loops, <code>with</code> statements, etc.).</p>
<p><code>handcalcs</code> works by parsing individual <em>lines</em> of Python within a cell. It does not parse the cell as a whole. Therefore all statements to be rendered must be contained on a single line.</p>
<h3 id="accepted-datatypes">Accepted datatypes</h3>
<p><code>handcalcs</code> will make an attempt to render all datatypes. However it is not intended for &ldquo;collections&rdquo;-based types (e.g. <code>list</code>, <code>tuple</code>, <code>dict</code>, etc.)</p>
<p>Objects are rendered into Latex by two main approaches:</p>
<ol>
<li>
<p>If the object has a <code>_repr_latex_()</code> method defined, then that method is used.</p>
<p>a) If the object has some alternate method for rendering itself into Latex code, e.g. <code>.latex()</code> or <code>.to_latex()</code>, that will be attempted as well.</p>
<p>In order for the representation to be rendered properly, the object&rsquo;s Latex represention must use commands that are implemented with MathJax and/or Katex.</p>
</li>
<li>
<p>If the object does not have a Latex method, then <code>str()</code> is used.</p>
</li>
</ol>
<p>If you are using object types which have str methods that render as <code>&lt;MyObject: value=34&gt;</code>, then that&rsquo;s what the Latex interpreter will see and attempt to render.</p>
<h3 id="arithmetic-operators">Arithmetic operators</h3>
<ul>
<li><em><code>+</code></em> renders as <em><code>+</code></em></li>
<li><em><code>-</code></em> renders as <em><code>-</code></em></li>
<li><em><code>*</code></em> renders as the &ldquo;dot operator&rdquo; (Latex: \cdot)</li>
<li><em><code>/</code></em> always renders as a fraction</li>
<li><em><code>**</code></em> renders as superscripts</li>
<li><em><code>%</code></em> renders as the &ldquo;mod function&rdquo; (Latex: \mod)</li>
</ul>
<p>Currently <code>//</code> is not rendered but you can easily use <code>math.floor</code> as a function instead.</p>
<h3 id="brackets-parentheses-are-critical">Brackets (parentheses) are critical</h3>
<p>Brackets are used to remove ambiguity in how the Latex is rendered. For example:</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">a <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">23.2</span>
b <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">9.4</span>
c <span style="color:#000;font-weight:bold">=</span> (<span style="color:#099">3</span><span style="color:#000;font-weight:bold">*</span>a)<span style="color:#000;font-weight:bold">/</span>(sqrt(<span style="color:#099">2</span><span style="color:#000;font-weight:bold">*</span>a <span style="color:#000;font-weight:bold">+</span> b<span style="color:#000;font-weight:bold">**</span><span style="color:#099">2</span>))
</code></pre></td></tr></table>
</div>
</div><p>Here, brackets are used to define both numerator and denominator, unambiguously.</p>
<p>However, even though it is correct and valid Python, the below will produce unexpected results:</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">a <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">23.2</span>
b <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">9.4</span>
c <span style="color:#000;font-weight:bold">=</span> (<span style="color:#099">3</span><span style="color:#000;font-weight:bold">*</span>a)<span style="color:#000;font-weight:bold">/</span>sqrt(<span style="color:#099">2</span><span style="color:#000;font-weight:bold">*</span>a <span style="color:#000;font-weight:bold">+</span> b<span style="color:#000;font-weight:bold">**</span><span style="color:#099">2</span>)
</code></pre></td></tr></table>
</div>
</div><p>
    
    
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/cold-eye/cold-eye.github.io/images/python-handcalcs/wrong_brackets.gif">
            <img class="mx-auto" alt="Incorrect brackets" src="https://cdn.jsdelivr.net/gh/cold-eye/cold-eye.github.io/images/python-handcalcs/wrong_brackets.gif" />
        </a>
    </p>
<p>Under-the-hood, parsed Python code in <code>handcalcs</code> is represented as a nested deque: every set of parentheses (no matter the context) begins a new nested deque which is recursively converted to Latex code.</p>
<p>The above line would look like this (represented as a list, for brevity): <code>[[3, '*', 'a'], '/', 'sqrt', [2, '*', 'a', '+', 'b', '**', '2' ]]</code>. Notice how the <code>sqrt</code> is all alone after the <code>/</code> operator?</p>
<p>To render the fraction properly, a lookahead is performed and the next item after the <code>/</code> is rendered as the denominator. In this instance, the next item is the function name, <code>sqrt</code>, and not the full expression.</p>
<p>Bracketing the entire denominator causes <code>handcalcs</code> to see the whole expression (as a nested deque) in the lookahead.</p>
<p><strong>If you have Latex output that does not look quite right, check to see if you are using brackets and fractions in this unambiguous manner.</strong></p>
<p>All actual calculations are handled by Jupyter when the cell is run. The resulting values are stored in the user&rsquo;s namespace dictionary and <code>handcalcs</code> uses the variable&rsquo;s corresponding value from the namespace dict as the result to display. Consequently, even if the representation of your calculation seems odd, the result will be correct <em>provided that you are using a unique variable name.</em> (see, <a href="https://github.com/connorferster/handcalcs#gotchas">Gotchas</a>)</p>
<h3 id="for-loops-and-other-iterations"><code>for</code> loops and other iterations</h3>
<p>Showing rendered iterations is not supported. The intention for use is that you perform your iterations in a cell that is not rendered and then, once the iteration has produced the desired resulting value, you render the result in a separate cell.</p>
<h2 id="gotchas">Gotchas</h2>
<p>Because <code>handcalcs</code> is designed for use within the Jupyter environment, and because Jupyter cells can be run out of order, there exists the possibility of having a big mess of beautifully rendered but <strong>completely incorrect</strong> calculations if you <em>re-use variable names throughout your notebook</em>.</p>
<p><code>handcalcs</code> uses the notebook&rsquo;s user namespace dictionary to look up values for all variables in the namespace. If your calculations are re-using variable names throughout the notebook, then the dictionary entry for that name may not be what you think it is when you run cells out of the order originally intended.</p>
<p>You <em>can</em> re-use variable names to good effect throughout a notebook, <em>IFF</em> the cells are run in the correct order (easier if this is just top to bottom).</p>
<p><strong>On this note: if you are using <code>handcalcs</code> for any kind of reporting that may become a legal document (e.g. design engineering calculations), it is up to YOU to ensure that the results are what you expect them to be. <code>handcalcs</code> is free and open-source software and the author(s) are not responsible for incorrect calculations that result from its use.</strong></p>
<p>That being said, the very purpose for the way <code>handcalcs</code> renders its math is to make it very easy to confirm and verify calculations by hand.</p>
<h2 id="applications-and-compatibility-with-opp-other-peoples-packages">Applications and Compatibility with OPP (Other People&rsquo;s Packages)</h2>
<p>** Please see <a href="https://github.com/connorferster/handcalcs/wiki">the wiki</a> for applications of <code>handcalcs</code> in education and engineering, in addition to examples of using <code>handcalcs</code> with other Python libraries such <a href="https://github.com/connorferster/handcalcs/wiki/Handcalcs-on--Streamlit">streamlit</a> and <a href="https://github.com/connorferster/handcalcs/wiki/Handcalcs-on-Papermill">papermill</a>.</p>
<h2 id="reference">reference</h2>
<p>1、https://github.com/connorferster/handcalcs</p>
<h2 id="打赏">打赏</h2>
<table>
<thead>
<tr>
<th align="left">微信
    
    
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/cold-eye/cold-eye.github.io/about/wechat.png">
            <img class="mx-auto" alt="微信" src="https://cdn.jsdelivr.net/gh/cold-eye/cold-eye.github.io/about/wechat.png" />
        </a>
    </th>
<th align="left">支付宝
    
    
        <a data-fancybox="gallery" href="https://cdn.jsdelivr.net/gh/cold-eye/cold-eye.github.io/about/alipay.png">
            <img class="mx-auto" alt="支付宝" src="https://cdn.jsdelivr.net/gh/cold-eye/cold-eye.github.io/about/alipay.png" />
        </a>
    </th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><em><strong>万分感谢</strong></em></td>
<td></td>
</tr>
</tbody>
</table>

        </div>

        
<div class="post-archive">
    <ul class="post-copyright">
        <li><strong>原文作者：</strong><a rel="author" href="https://cold-eye.github.io/">冷眼</a></li>
        <li style="word-break:break-all"><strong>原文链接：</strong><a href="https://cold-eye.github.io/post/python-handcalcs/">https://cold-eye.github.io/post/python-handcalcs/</a></li>
        <li><strong>版权声明：</strong>本作品采用<a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a>进行许可，非商业转载请注明出处（作者，原文链接），商业转载请联系作者获得授权。</li>
    </ul>
</div>
<br/>



        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/post/python-flask-web/">python flask 前端接收参数</a></li>
        
        <li><a href="/post/useful-regex/">python 一些好用的正则</a></li>
        
        <li><a href="/post/python-es/">python es的一些简单操作</a></li>
        
        <li><a href="/post/rust-easy-to-deep-1/">rust 与 python 由浅入深：摄氏温度转华氏温度</a></li>
        
        <li><a href="/post/python-words-frequency/">python 文本词频统计</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='https://cold-eye.github.io/tags/python'>python</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
    
    
    
    <div id="vcomments"></div>
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src='//unpkg.com/valine/dist/Valine.min.js'></script>

    <script type="text/javascript">
      new Valine({
          el: '#vcomments' ,
          appId: '2bNGHPmILSH9xQJ9XjQchomv-gzGzoHsz',
          appKey: '52xbEYwnpwLahMh4Yj55r69v',
          notify: 'false', 
          verify: 'false', 
          avatar:'mm', 
          placeholder: '说点什么吧...',
          visitor: 'false'
      });
    </script>
</div>

                </div>

                <div id="secondary">
    <section class="widget">
        <!DOCTYPE html>
<html>

<head>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">
    <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>
</head>






































<body>
    <div class="demo">
        <div id="player1">
        </div>
    </div>
    <script>
        var ap = new APlayer
            ({
                element: document.getElementById('player1'),
                narrow: false,
                fixed: false, 
                autoplay: false,
                showlrc: true,
                mini: false,
                theme: '#FADFA3',
                loop: 'all',
                order: 'random',
                preload: 'auto',
                volume: 0.5,
                mutex: false,
                listFolded: true,
                listMaxHeight: 90,
                lrcType: 2,
                music:
                    [
                        {
                            artist: 'A',
                            name: 'A',
                            url:'http://music.163.com/song/media/outer/url?id=28560087.mp3',
                            cover: '',
                            lrc:'A',
                        },{
                            name: 'B',
                            artist:'B',
                            url:'http://music.163.com/song/media/outer/url?id=1438282140.mp3',
                            cover: '',
                            lrc:'B',
                            theme: '#ebd0c2'
                        },{
                            name: 'C',
                            artist:'C',
                            url:'http://music.163.com/song/media/outer/url?id=5316168.mp3',
                            cover: '',
                            lrc:'C',
                            theme: '#46718b'
                        },{
                            name: 'D',
                            artist:'D',
                            url:'http://music.163.com/song/media/outer/url?id=2007819.mp3',
                            cover: '',
                            lrc:'D',
                            theme: ''
                        },{
                            name: 'E',
                            artist:'E',
                            url:'http://music.163.com/song/media/outer/url?id=1398850429.mp3',
                            cover: '',
                            lrc:'E',
                            theme: ''
                        },{
                            name: 'F',
                            artist:'F',
                            url:'http://music.163.com/song/media/outer/url?id=28830038.mp3',
                            cover: '',
                            lrc:'F',
                            theme: ''
                        },{
                            name: 'G',
                            artist:'G',
                            url:'http://music.163.com/song/media/outer/url?id=451126971.mp3',
                            cover: '',
                            lrc:'G',
                            theme: ''
                        },{
                            name: 'H',
                            artist:'H',
                            url:'http://music.163.com/song/media/outer/url?id=744866.mp3',
                            cover: '',
                            lrc:'H',
                            theme: ''
                        },{
                            name: 'I',
                            artist:'I',
                            url:'http://music.163.com/song/media/outer/url?id=1341800295.mp3',
                            cover: '',
                            lrc:'I',
                            theme: ''
                        },{
                            name: 'J',
                            artist:'J',
                            url:'http://music.163.com/song/media/outer/url?id=32835377.mp3',
                            cover: '',
                            lrc:'J',
                            theme: ''
                        },{
                            name: 'K',
                            artist:'K',
                            url:'http://music.163.com/song/media/outer/url?id=1379464883.mp3',
                            cover: '',
                            lrc:'K',
                            theme: ''
                        },{
                            name: 'L',
                            artist:'L',
                            url:'http://music.163.com/song/media/outer/url?id=506726178.mp3',
                            cover: '',
                            lrc:'L',
                            theme: ''
                        },{
                            name: 'M',
                            artist:'M',
                            url:'http://music.163.com/song/media/outer/url?id=411214138.mp3',
                            cover: '',
                            lrc:'M',
                            theme: ''
                        },{
                            name: 'N',
                            artist:'N',
                            url:'http://music.163.com/song/media/outer/url?id=1415097371.mp3',
                            cover: '',
                            lrc:'N',
                            theme: ''
                        },{
                            name: 'O',
                            artist:'O',
                            url:'http://music.163.com/song/media/outer/url?id=505449407.mp3',
                            cover: '',
                            lrc:'O',
                            theme: ''
                        },{
                            name: 'P',
                            artist:'P',
                            url:'http://music.163.com/song/media/outer/url?id=29947420.mp3',
                            cover: '',
                            lrc:'P',
                            theme: ''
                        },{
                            name: 'Q',
                            artist:'Q',
                            url:'http://music.163.com/song/media/outer/url?id=21311956.mp3',
                            cover: '',
                            lrc:'Q',
                            theme: ''
                        },{
                            name: 'R',
                            artist:'R',
                            url:'http://music.163.com/song/media/outer/url?id=418602088.mp3',
                            cover: '',
                            lrc:'R',
                            theme: ''
                        },{
                            name: 'S',
                            artist:'S',
                            url:'http://music.163.com/song/media/outer/url?id=1363551021.mp3',
                            cover: '',
                            lrc:'S',
                            theme: ''
                        },{
                            name: 'T',
                            artist:'T',
                            url:'http://music.163.com/song/media/outer/url?id=1376653715.mp3',
                            cover: '',
                            lrc:'T',
                            theme: ''
                        },{
                            name: 'U',
                            artist:'U',
                            url:'http://music.163.com/song/media/outer/url?id=546838016.mp3',
                            cover: '',
                            lrc:'U',
                            theme: ''
                        },{
                            name: 'V',
                            artist:'V',
                            url:'http://music.163.com/song/media/outer/url?id=1403250178.mp3',
                            cover: '',
                            lrc:'V',
                            theme: ''
                        },{
                            name: 'W',
                            artist:'W',
                            url:'http://music.163.com/song/media/outer/url?id=5348853.mp3',
                            cover: '',
                            lrc:'W',
                            theme: ''
                        },{
                            name: 'X',
                            artist:'X',
                            url:'http://music.163.com/song/media/outer/url?id=34613621.mp3',
                            cover: '',
                            lrc:'X',
                            theme: ''
                        },{
                            name: 'Y',
                            artist:'Y',
                            url:'http://music.163.com/song/media/outer/url?id=553815184.mp3',
                            cover: '',
                            lrc:'Y',
                            theme: ''
                        },{
                            name: 'Z',
                            artist:'Z',
                            url:'http://music.163.com/song/media/outer/url?id=16607021.mp3',
                            cover: '',
                            lrc:'Z',
                            theme: ''
                        },{
                            name: 'X1',
                            artist:'X1',
                            url:'http://music.163.com/song/media/outer/url?id=3961975.mp3',
                            cover: '',
                            lrc:'X1',
                            theme: ''
                        },{
                            name: 'X2',
                            artist:'X2',
                            url:'http://music.163.com/song/media/outer/url?id=19615186.mp3',
                            cover: '',
                            lrc:'X2',
                            theme: ''
                        },{
                            name: 'X3',
                            artist:'X3',
                            url:'http://music.163.com/song/media/outer/url?id=34468798.mp3',
                            cover: '',
                            lrc:'X3',
                            theme: ''
                        },{
                            name: 'X4',
                            artist:'X4',
                            url:'http://music.163.com/song/media/outer/url?id=1341964346.mp3',
                            cover: '',
                            lrc:'X4',
                            theme: ''
                        },{
                            name: 'X5',
                            artist:'X5',
                            url:'http://music.163.com/song/media/outer/url?id=1374329431.mp3',
                            cover: '',
                            lrc:'X5',
                            theme: ''
                        },
                    ]

                    
        });
        
    </script>
</body>
    </section>

    <section class="widget">
        <form id="search" action='https://cold-eye.github.io/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://cold-eye.github.io/">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://cold-eye.github.io/post/python-pandas-excel-sheet/" title="pandas 读取excel的每个sheet">pandas 读取excel的每个sheet</a>
    </li>
    
    <li>
        <a href="https://cold-eye.github.io/post/python-streamlit-coding/" title="StreamLit coding">StreamLit coding</a>
    </li>
    
    <li>
        <a href="https://cold-eye.github.io/post/python-streamlit-ngrok/" title="ngrok 内网穿透，streamlit 建立外网服务">ngrok 内网穿透，streamlit 建立外网服务</a>
    </li>
    
    <li>
        <a href="https://cold-eye.github.io/post/python-pandas-big-file/" title="python pandas 大文件读写">python pandas 大文件读写</a>
    </li>
    
    <li>
        <a href="https://cold-eye.github.io/post/useful-web/" title="不错的网站">不错的网站</a>
    </li>
    
</ul>
    </section>

    
<section class="widget">
    <h3 class="widget-title" style="color:red">福利派送</h3>
    <ul class="widget-list">
        
        <li>
            <a href="https://www.freelancer.com/get/qinyukun1325?f=give" title="注册freelancer得20美刀" target="_blank" style="color:red">
                
                    注册freelancer得20美刀
                
            </a>
        </li>
        
    </ul>
</section>


    <section class="widget">
        <h3 class="widget-title">分类</h3>
<ul class="widget-list">
    
    <li><a href="https://cold-eye.github.io/categories/IT%E6%8A%80%E6%9C%AF/">IT技术 (8)</a></li>
    
    <li><a href="https://cold-eye.github.io/categories/hugo/">hugo (3)</a></li>
    
    <li><a href="https://cold-eye.github.io/categories/nlp/">nlp (6)</a></li>
    
    <li><a href="https://cold-eye.github.io/categories/python/">python (25)</a></li>
    
    <li><a href="https://cold-eye.github.io/categories/rust/">rust (1)</a></li>
    
    <li><a href="https://cold-eye.github.io/categories/streamlit/">streamlit (5)</a></li>
    
    <li><a href="https://cold-eye.github.io/categories/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/">人工智能 (2)</a></li>
    
    <li><a href="https://cold-eye.github.io/categories/%E7%BB%8F%E6%B5%8E%E7%94%9F%E6%B4%BB/">经济生活 (9)</a></li>
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title">标签</h3>
<div class="tagcloud">
    
    <a href="https://cold-eye.github.io/tags/IT%E6%8A%80%E6%9C%AF/">IT技术</a>
    
    <a href="https://cold-eye.github.io/tags/hugo/">hugo</a>
    
    <a href="https://cold-eye.github.io/tags/linux/">linux</a>
    
    <a href="https://cold-eye.github.io/tags/mac/">mac</a>
    
    <a href="https://cold-eye.github.io/tags/nlp/">nlp</a>
    
    <a href="https://cold-eye.github.io/tags/python/">python</a>
    
    <a href="https://cold-eye.github.io/tags/rust/">rust</a>
    
    <a href="https://cold-eye.github.io/tags/streamlit/">streamlit</a>
    
    <a href="https://cold-eye.github.io/tags/%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/">人工智能</a>
    
    <a href="https://cold-eye.github.io/tags/%E5%81%A5%E8%BA%AB/">健身</a>
    
    <a href="https://cold-eye.github.io/tags/%E5%9B%BE%E5%83%8F/">图像</a>
    
    <a href="https://cold-eye.github.io/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">深度学习</a>
    
    <a href="https://cold-eye.github.io/tags/%E7%88%AC%E8%99%AB/">爬虫</a>
    
    <a href="https://cold-eye.github.io/tags/%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1/">知识图谱</a>
    
    <a href="https://cold-eye.github.io/tags/%E7%A8%8B%E5%BA%8F%E5%91%98/">程序员</a>
    
    <a href="https://cold-eye.github.io/tags/%E7%BB%8F%E6%B5%8E%E7%94%9F%E6%B4%BB/">经济生活</a>
    
    <a href="https://cold-eye.github.io/tags/%E8%87%AA%E7%84%B6%E8%AF%AD%E8%A8%80%E5%A4%84%E7%90%86/">自然语言处理</a>
    
    <a href="https://cold-eye.github.io/tags/%E8%A2%AB%E5%8A%A8%E6%94%B6%E5%85%A5/">被动收入</a>
    
    <a href="https://cold-eye.github.io/tags/%E8%B7%91%E6%AD%A5/">跑步</a>
    
</div>
    </section>

    
<section class="widget">
    <h3 class="widget-title">友情链接</h3>
    <ul class="widget-list">
        
        <li>
            <a target="_blank" href="https://knowledge-of-medical.blogspot.com/" title="healthy">healthy</a>
        </li>
        
    </ul>
</section>


    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://cold-eye.github.io/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
    <footer id="footer">
    <script src="//code.tidio.co/2dpeb0joi7ueoxequchq01ya9ckrmy63.js" async></script>
    <div class="container">
        &copy; 
        2018 - 
        2020
        <a href="https://cold-eye.github.io/">冷眼-风雨飘摇 By 冷眼</a>.
        
        访问量<span id="busuanzi_value_site_pv"></span>次 | 访客<span id="busuanzi_value_site_uv"></span>人
        
        
        
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script><script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://cdn.bootcdn.net/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js"></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-173047983-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




    <script src='/js/douban.js'></script>



</body>

</html>